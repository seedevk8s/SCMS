<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1000" width="1400" height="1000">
  <!-- Background -->
  <rect width="1400" height="1000" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="700" y="40" font-size="28" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Thymeleaf Fragment 구조 및 렌더링 흐름
  </text>
  
  <!-- Section 1: Template Files -->
  <text x="150" y="90" font-size="18" font-weight="bold" fill="#34495e">1. 템플릿 파일</text>
  
  <!-- layouts/default.html -->
  <rect x="50" y="110" width="300" height="200" rx="8" fill="#fff" stroke="#3498db" stroke-width="3"/>
  <text x="200" y="135" font-size="16" font-weight="bold" text-anchor="middle" fill="#3498db">
    layouts/default.html
  </text>
  <line x1="60" y1="145" x2="340" y2="145" stroke="#e0e0e0" stroke-width="1"/>
  
  <text x="70" y="170" font-size="13" font-family="monospace" fill="#555">
    th:fragment="layout
  </text>
  <text x="70" y="190" font-size="13" font-family="monospace" fill="#555">
      (title, content)"
  </text>
  <text x="70" y="220" font-size="13" font-family="monospace" fill="#e74c3c">
    ├─ &lt;title th:replace="${title}"&gt;
  </text>
  <text x="70" y="240" font-size="13" font-family="monospace" fill="#27ae60">
    ├─ &lt;div th:replace="header"&gt;
  </text>
  <text x="70" y="260" font-size="13" font-family="monospace" fill="#e67e22">
    ├─ &lt;div th:replace="${content}"&gt;
  </text>
  <text x="70" y="280" font-size="13" font-family="monospace" fill="#9b59b6">
    └─ &lt;div th:replace="footer"&gt;
  </text>
  
  <!-- fragments/header.html -->
  <rect x="50" y="340" width="300" height="120" rx="8" fill="#fff" stroke="#27ae60" stroke-width="3"/>
  <text x="200" y="365" font-size="16" font-weight="bold" text-anchor="middle" fill="#27ae60">
    fragments/header.html
  </text>
  <line x1="60" y1="375" x2="340" y2="375" stroke="#e0e0e0" stroke-width="1"/>
  
  <text x="70" y="400" font-size="13" font-family="monospace" fill="#555">
    th:fragment="header"
  </text>
  <text x="70" y="420" font-size="13" fill="#666">
    • 로고 (SCMS)
  </text>
  <text x="70" y="440" font-size="13" fill="#666">
    • 네비게이션 메뉴
  </text>
  
  <!-- fragments/footer.html -->
  <rect x="50" y="490" width="300" height="120" rx="8" fill="#fff" stroke="#9b59b6" stroke-width="3"/>
  <text x="200" y="515" font-size="16" font-weight="bold" text-anchor="middle" fill="#9b59b6">
    fragments/footer.html
  </text>
  <line x1="60" y1="525" x2="340" y2="525" stroke="#e0e0e0" stroke-width="1"/>
  
  <text x="70" y="550" font-size="13" font-family="monospace" fill="#555">
    th:fragment="footer"
  </text>
  <text x="70" y="570" font-size="13" fill="#666">
    • 서비스 안내 버튼
  </text>
  <text x="70" y="590" font-size="13" fill="#666">
    • 푸터 메뉴 / 저작권
  </text>
  
  <!-- index.html -->
  <rect x="50" y="640" width="300" height="180" rx="8" fill="#fff" stroke="#e67e22" stroke-width="3"/>
  <text x="200" y="665" font-size="16" font-weight="bold" text-anchor="middle" fill="#e67e22">
    index.html
  </text>
  <line x1="60" y1="675" x2="340" y2="675" stroke="#e0e0e0" stroke-width="1"/>
  
  <text x="70" y="700" font-size="13" font-family="monospace" fill="#555">
    th:replace="~{layouts/default
  </text>
  <text x="70" y="720" font-size="13" font-family="monospace" fill="#555">
      :: layout(~{::title},
  </text>
  <text x="70" y="740" font-size="13" font-family="monospace" fill="#555">
                ~{::content})}"
  </text>
  <text x="70" y="770" font-size="13" fill="#666">
    &lt;title&gt;SCMS&lt;/title&gt;
  </text>
  <text x="70" y="790" font-size="13" fill="#666">
    &lt;div th:fragment="content"&gt;
  </text>
  <text x="70" y="810" font-size="13" fill="#666">
      페이지 컨텐츠...
  </text>
  
  <!-- Section 2: Processing Flow -->
  <text x="600" y="90" font-size="18" font-weight="bold" fill="#34495e">2. Fragment 처리 흐름</text>
  
  <!-- Step 1 -->
  <rect x="450" y="150" width="400" height="80" rx="8" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
  <text x="650" y="180" font-size="14" font-weight="bold" text-anchor="middle" fill="#1976d2">
    ① 브라우저가 index.html 요청
  </text>
  <text x="650" y="205" font-size="12" text-anchor="middle" fill="#555">
    GET http://localhost:8080/
  </text>
  
  <!-- Arrow -->
  <path d="M 650 230 L 650 265" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Step 2 -->
  <rect x="450" y="270" width="400" height="80" rx="8" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
  <text x="650" y="300" font-size="14" font-weight="bold" text-anchor="middle" fill="#f57c00">
    ② Thymeleaf가 index.html 파싱
  </text>
  <text x="650" y="325" font-size="12" text-anchor="middle" fill="#555">
    th:replace 발견 → default.html 로드
  </text>
  
  <!-- Arrow -->
  <path d="M 650 350 L 650 385" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Step 3 -->
  <rect x="450" y="390" width="400" height="100" rx="8" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2"/>
  <text x="650" y="420" font-size="14" font-weight="bold" text-anchor="middle" fill="#7b1fa2">
    ③ default.html에 파라미터 주입
  </text>
  <text x="650" y="445" font-size="12" text-anchor="middle" fill="#555">
    title → &lt;title&gt;SCMS&lt;/title&gt;
  </text>
  <text x="650" y="465" font-size="12" text-anchor="middle" fill="#555">
    content → index.html의 content fragment
  </text>
  
  <!-- Arrow -->
  <path d="M 650 490 L 650 525" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Step 4 -->
  <rect x="450" y="530" width="400" height="100" rx="8" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
  <text x="650" y="560" font-size="14" font-weight="bold" text-anchor="middle" fill="#388e3c">
    ④ Fragment들을 조립
  </text>
  <text x="650" y="585" font-size="12" text-anchor="middle" fill="#555">
    header.html → &lt;header&gt; 영역
  </text>
  <text x="650" y="605" font-size="12" text-anchor="middle" fill="#555">
    footer.html → &lt;footer&gt; 영역
  </text>
  
  <!-- Arrow -->
  <path d="M 650 630 L 650 665" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Step 5 -->
  <rect x="450" y="670" width="400" height="80" rx="8" fill="#ffebee" stroke="#f44336" stroke-width="2"/>
  <text x="650" y="700" font-size="14" font-weight="bold" text-anchor="middle" fill="#d32f2f">
    ⑤ 최종 HTML 생성
  </text>
  <text x="650" y="725" font-size="12" text-anchor="middle" fill="#555">
    완전한 HTML을 브라우저로 전송
  </text>
  
  <!-- Section 3: Final Result -->
  <text x="1100" y="90" font-size="18" font-weight="bold" fill="#34495e">3. 최종 렌더링 결과</text>
  
  <!-- Final HTML Structure -->
  <rect x="950" y="110" width="400" height="710" rx="8" fill="#fff" stroke="#e74c3c" stroke-width="3"/>
  <text x="1150" y="140" font-size="16" font-weight="bold" text-anchor="middle" fill="#e74c3c">
    최종 HTML (브라우저로 전송)
  </text>
  <line x1="960" y1="150" x2="1340" y2="150" stroke="#e0e0e0" stroke-width="1"/>
  
  <!-- HTML Structure Visualization -->
  <text x="970" y="180" font-size="14" font-weight="bold" fill="#333">
    &lt;html&gt;
  </text>
  
  <text x="990" y="205" font-size="13" font-weight="bold" fill="#555">
    &lt;head&gt;
  </text>
  <text x="1010" y="225" font-size="12" fill="#e74c3c">
    &lt;title&gt;SCMS - 학생역량관리시스템&lt;/title&gt;
  </text>
  <text x="1010" y="245" font-size="12" fill="#666">
    &lt;link rel="stylesheet" href="common.css"&gt;
  </text>
  <text x="1010" y="265" font-size="12" fill="#666">
    &lt;link rel="stylesheet" href="layout.css"&gt;
  </text>
  <text x="990" y="285" font-size="13" font-weight="bold" fill="#555">
    &lt;/head&gt;
  </text>
  
  <text x="990" y="310" font-size="13" font-weight="bold" fill="#555">
    &lt;body&gt;
  </text>
  
  <!-- Header Section -->
  <rect x="1000" y="320" width="330" height="90" rx="4" fill="#e8f5e9" stroke="#27ae60" stroke-width="2"/>
  <text x="1010" y="340" font-size="12" font-weight="bold" fill="#27ae60">
    &lt;header class="header"&gt;
  </text>
  <text x="1030" y="360" font-size="11" fill="#555">
    • 로고: SCMS / 학생역량관리시스템
  </text>
  <text x="1030" y="380" font-size="11" fill="#555">
    • 네비게이션: 비교과/마일리지/상담...
  </text>
  <text x="1030" y="400" font-size="11" fill="#555">
    • 회원가입 / 로그인 / 검색
  </text>
  <text x="1010" y="395" font-size="12" font-weight="bold" fill="#27ae60">
  </text>
  
  <!-- Main Content Section -->
  <rect x="1000" y="420" width="330" height="180" rx="4" fill="#fff3e0" stroke="#e67e22" stroke-width="2"/>
  <text x="1010" y="440" font-size="12" font-weight="bold" fill="#e67e22">
    &lt;main class="main-content"&gt;
  </text>
  <text x="1030" y="465" font-size="11" fill="#555">
    &lt;section class="hero-section"&gt;
  </text>
  <text x="1050" y="485" font-size="11" fill="#666">
    알림판 / 알려, 알리고...
  </text>
  <text x="1030" y="510" font-size="11" fill="#555">
    &lt;section class="icon-menu-section"&gt;
  </text>
  <text x="1050" y="530" font-size="11" fill="#666">
    전체보기 / 문제해결역량...
  </text>
  <text x="1030" y="555" font-size="11" fill="#555">
    &lt;section class="programs-section"&gt;
  </text>
  <text x="1050" y="575" font-size="11" fill="#666">
    프로그램 카드 4개...
  </text>
  <text x="1010" y="590" font-size="12" font-weight="bold" fill="#e67e22">
    &lt;/main&gt;
  </text>
  
  <!-- Footer Section -->
  <rect x="1000" y="610" width="330" height="90" rx="4" fill="#f3e5f5" stroke="#9b59b6" stroke-width="2"/>
  <text x="1010" y="630" font-size="12" font-weight="bold" fill="#9b59b6">
    &lt;footer class="footer"&gt;
  </text>
  <text x="1030" y="650" font-size="11" fill="#555">
    • 서비스 안내 버튼
  </text>
  <text x="1030" y="670" font-size="11" fill="#555">
    • 비교과/마일리지/상담... 메뉴
  </text>
  <text x="1030" y="690" font-size="11" fill="#555">
    • © 2025 SCMS. All rights reserved.
  </text>
  <text x="1010" y="695" font-size="12" font-weight="bold" fill="#9b59b6">
  </text>
  
  <text x="990" y="720" font-size="13" font-weight="bold" fill="#555">
    &lt;/body&gt;
  </text>
  
  <text x="970" y="745" font-size="14" font-weight="bold" fill="#333">
    &lt;/html&gt;
  </text>
  
  <!-- Result Box -->
  <rect x="960" y="765" width="380" height="45" rx="4" fill="#d4edda" stroke="#28a745" stroke-width="2"/>
  <text x="1150" y="790" font-size="13" font-weight="bold" text-anchor="middle" fill="#155724">
    ✅ 완전한 HTML 문서 생성 완료!
  </text>
  
  <!-- Arrows from templates to processing -->
  <path d="M 350 210 L 450 190" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowblue)"/>
  <path d="M 350 400 L 450 300" stroke="#27ae60" stroke-width="2" fill="none" marker-end="url(#arrowgreen)"/>
  <path d="M 350 550 L 450 500" stroke="#9b59b6" stroke-width="2" fill="none" marker-end="url(#arrowpurple)"/>
  <path d="M 350 730 L 450 400" stroke="#e67e22" stroke-width="2" fill="none" marker-end="url(#arroworange)"/>
  
  <!-- Arrows from processing to result -->
  <path d="M 850 710 L 950 400" stroke="#e74c3c" stroke-width="2" fill="none" marker-end="url(#arrowred)"/>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666"/>
    </marker>
    <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#3498db"/>
    </marker>
    <marker id="arrowgreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#27ae60"/>
    </marker>
    <marker id="arrowpurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#9b59b6"/>
    </marker>
    <marker id="arroworange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#e67e22"/>
    </marker>
    <marker id="arrowred" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#e74c3c"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <rect x="50" y="870" width="1300" height="110" rx="8" fill="#fff" stroke="#bdc3c7" stroke-width="2"/>
  <text x="700" y="895" font-size="16" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    핵심 개념
  </text>
  
  <text x="70" y="920" font-size="13" font-weight="bold" fill="#333">
    • th:fragment="name"
  </text>
  <text x="250" y="920" font-size="12" fill="#666">
    재사용 가능한 코드 조각 정의
  </text>
  
  <text x="70" y="945" font-size="13" font-weight="bold" fill="#333">
    • th:replace="~{path :: fragment}"
  </text>
  <text x="250" y="945" font-size="12" fill="#666">
    Fragment를 현재 위치에 삽입
  </text>
  
  <text x="70" y="970" font-size="13" font-weight="bold" fill="#333">
    • th:replace="${content}"
  </text>
  <text x="250" y="970" font-size="12" fill="#666">
    파라미터로 받은 Fragment 삽입
  </text>
  
  <text x="700" y="920" font-size="13" font-weight="bold" fill="#333">
    • Layout Pattern
  </text>
  <text x="850" y="920" font-size="12" fill="#666">
    공통 레이아웃 + 페이지별 컨텐츠
  </text>
  
  <text x="700" y="945" font-size="13" font-weight="bold" fill="#333">
    • 코드 재사용
  </text>
  <text x="850" y="945" font-size="12" fill="#666">
    Header/Footer를 한 번만 작성
  </text>
  
  <text x="700" y="970" font-size="13" font-weight="bold" fill="#333">
    • 유지보수 용이
  </text>
  <text x="850" y="970" font-size="12" fill="#666">
    Fragment 수정 → 모든 페이지 자동 반영
  </text>
</svg>
