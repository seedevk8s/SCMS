<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layouts/default :: layout(~{::title}, ~{::content})}">
<head>
    <title>수료 이력 - SCMS</title>
    <link rel="stylesheet" th:href="@{/css/program-completion.css}">
</head>
<body>
    <div th:fragment="content">
        <!-- Page Specific CSS -->
        <link rel="stylesheet" th:href="@{/css/program-completion.css}">
        <link rel="stylesheet" th:href="@{/css/program-tabs.css}">

        <!-- Page Header -->
        <section class="page-header">
            <div class="container">
                <h1 class="page-title">
                    <i class="fas fa-graduation-cap"></i> MY 프로그램
                </h1>
                <p class="page-description">나의 프로그램 수료 내역과 성과를 확인하세요.</p>
            </div>
        </section>
        
        <!-- Program Tabs Navigation -->
        <div th:replace="~{fragments/program-tabs :: programTabs('completion')}"></div>
        
        <!-- Achievement Summary -->
        <section class="achievement-section">
            <div class="container">
                <div class="achievement-banner">
                    <div class="achievement-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="achievement-content">
                        <h3>나의 성과</h3>
                        <div class="achievement-stats">
                            <div class="stat-item">
                                <span class="stat-value" id="totalCompletions">0</span>
                                <span class="stat-label">총 수료</span>
                            </div>
                            <div class="stat-divider"></div>
                            <div class="stat-item">
                                <span class="stat-value" id="totalHours">0</span>
                                <span class="stat-label">총 이수 시간</span>
                            </div>
                            <div class="stat-divider"></div>
                            <div class="stat-item">
                                <span class="stat-value" id="totalMileage">0</span>
                                <span class="stat-label">획득 마일리지</span>
                            </div>
                            <div class="stat-divider"></div>
                            <div class="stat-item">
                                <span class="stat-value" id="certificatesCount">0</span>
                                <span class="stat-label">발급 가능 증명서</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Category Statistics -->
        <section class="category-section">
            <div class="container">
                <h3 class="section-title">
                    <i class="fas fa-chart-pie"></i> 분야별 수료 현황
                </h3>
                <div class="category-cards">
                    <div class="category-card" data-category="LEADERSHIP">
                        <div class="category-icon leadership">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="category-info">
                            <span class="category-name">리더십</span>
                            <span class="category-count" id="leadershipCount">0</span>
                        </div>
                    </div>
                    
                    <div class="category-card" data-category="CAREER">
                        <div class="category-icon career">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <div class="category-info">
                            <span class="category-name">진로</span>
                            <span class="category-count" id="careerCount">0</span>
                        </div>
                    </div>
                    
                    <div class="category-card" data-category="GLOBAL">
                        <div class="category-icon global">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div class="category-info">
                            <span class="category-name">글로벌</span>
                            <span class="category-count" id="globalCount">0</span>
                        </div>
                    </div>
                    
                    <div class="category-card" data-category="VOLUNTEER">
                        <div class="category-icon volunteer">
                            <i class="fas fa-hands-helping"></i>
                        </div>
                        <div class="category-info">
                            <span class="category-name">봉사</span>
                            <span class="category-count" id="volunteerCount">0</span>
                        </div>
                    </div>
                    
                    <div class="category-card" data-category="CREATIVE">
                        <div class="category-icon creative">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <div class="category-info">
                            <span class="category-name">창의</span>
                            <span class="category-count" id="creativeCount">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Filter Section -->
        <section class="filter-section">
            <div class="container">
                <div class="filter-group">
                    <select class="form-select" id="categoryFilter">
                        <option value="">전체 분야</option>
                        <option value="LEADERSHIP">리더십</option>
                        <option value="CAREER">진로</option>
                        <option value="GLOBAL">글로벌</option>
                        <option value="VOLUNTEER">봉사</option>
                        <option value="CREATIVE">창의</option>
                    </select>
                    
                    <select class="form-select" id="yearFilter">
                        <option value="">전체 연도</option>
                        <option value="2025">2025년</option>
                        <option value="2024">2024년</option>
                        <option value="2023">2023년</option>
                    </select>
                    
                    <select class="form-select" id="sortFilter">
                        <option value="recent">최근 수료순</option>
                        <option value="oldest">오래된순</option>
                        <option value="hours">이수시간 높은순</option>
                        <option value="mileage">마일리지 높은순</option>
                    </select>
                    
                    <div class="search-box">
                        <input type="text" class="form-control" id="searchInput" placeholder="프로그램명 검색...">
                        <button class="btn btn-primary" id="searchBtn">
                            <i class="fas fa-search"></i> 검색
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Completions List -->
        <section class="completions-section">
            <div class="container">
                <div class="section-header">
                    <h3>
                        <i class="fas fa-list-ul"></i> 수료 프로그램
                        <span class="count-badge" id="displayCount">0</span>
                    </h3>
                    <button class="btn btn-outline-primary" id="exportBtn">
                        <i class="fas fa-file-export"></i> 이력 내보내기
                    </button>
                </div>
                
                <!-- No Data Message -->
                <div class="no-data-message" id="noDataMessage" style="display: none;">
                    <i class="fas fa-inbox"></i>
                    <p>수료한 프로그램이 없습니다.</p>
                    <a href="/program/list" class="btn btn-primary">프로그램 둘러보기</a>
                </div>
                
                <!-- Completions Grid -->
                <div class="completions-grid" id="completionsGrid">
                    <!-- JavaScript로 동적 생성 -->
                </div>
            </div>
        </section>
        
        <!-- Pagination -->
        <section class="pagination-section">
            <div class="container">
                <nav aria-label="Page navigation">
                    <ul class="pagination justify-content-center" id="pagination">
                        <!-- JavaScript로 동적 생성 -->
                    </ul>
                </nav>
            </div>
        </section>
        
        <!-- Certificate Modal -->
        <div class="modal fade" id="certificateModal" tabindex="-1" aria-labelledby="certificateModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header bg-primary text-white">
                        <h5 class="modal-title" id="certificateModalLabel">
                            <i class="fas fa-certificate"></i> 수료증 발급
                        </h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="certificate-preview">
                            <div class="certificate-header">
                                <h2>수료증</h2>
                                <p class="certificate-subtitle">Certificate of Completion</p>
                            </div>
                            
                            <div class="certificate-body">
                                <div class="student-info">
                                    <p class="student-name">홍길동 님</p>
                                    <p class="student-id">(학번: 20241234)</p>
                                </div>
                                
                                <div class="program-info">
                                    <p class="completion-text">위 사람은 아래의 프로그램을 성실히 이수하였기에</p>
                                    <p class="completion-text">이 수료증을 수여합니다.</p>
                                    
                                    <div class="program-details">
                                        <h4 id="certificateProgramTitle"></h4>
                                        <div class="details-grid">
                                            <div class="detail-item">
                                                <span class="detail-label">프로그램 기간:</span>
                                                <span class="detail-value" id="certificateProgramPeriod"></span>
                                            </div>
                                            <div class="detail-item">
                                                <span class="detail-label">이수 시간:</span>
                                                <span class="detail-value" id="certificateHours"></span>
                                            </div>
                                            <div class="detail-item">
                                                <span class="detail-label">수료일:</span>
                                                <span class="detail-value" id="certificateCompletionDate"></span>
                                            </div>
                                            <div class="detail-item">
                                                <span class="detail-label">마일리지:</span>
                                                <span class="detail-value" id="certificateMileage"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="certificate-footer">
                                    <p class="issue-date" id="certificateIssueDate"></p>
                                    <p class="issuer">중앙대학교 학생역량개발센터</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="fas fa-times"></i> 닫기
                        </button>
                        <button type="button" class="btn btn-primary" id="downloadCertificateBtn">
                            <i class="fas fa-download"></i> 다운로드
                        </button>
                        <button type="button" class="btn btn-outline-primary" id="printCertificateBtn">
                            <i class="fas fa-print"></i> 인쇄
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Detail Modal -->
        <div class="modal fade" id="detailModal" tabindex="-1" aria-labelledby="detailModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="detailModalLabel">
                            <i class="fas fa-info-circle"></i> 수료 상세 정보
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="detail-content">
                            <h4 id="detailProgramTitle"></h4>
                            
                            <div class="detail-section">
                                <h6><i class="fas fa-info"></i> 기본 정보</h6>
                                <div class="info-grid">
                                    <div class="info-item">
                                        <span class="info-label">분야:</span>
                                        <span class="info-value" id="detailCategory"></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">프로그램 기간:</span>
                                        <span class="info-value" id="detailProgramPeriod"></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">수료일:</span>
                                        <span class="info-value" id="detailCompletionDate"></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">이수 시간:</span>
                                        <span class="info-value" id="detailHours"></span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="detail-section">
                                <h6><i class="fas fa-star"></i> 성과</h6>
                                <div class="info-grid">
                                    <div class="info-item">
                                        <span class="info-label">획득 마일리지:</span>
                                        <span class="info-value badge bg-success" id="detailMileage"></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">출석률:</span>
                                        <span class="info-value" id="detailAttendance"></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">참여도:</span>
                                        <span class="info-value" id="detailParticipation"></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">평가 점수:</span>
                                        <span class="info-value" id="detailScore"></span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="detail-section">
                                <h6><i class="fas fa-comment"></i> 총평</h6>
                                <p class="detail-comment" id="detailComment"></p>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="fas fa-times"></i> 닫기
                        </button>
                        <button type="button" class="btn btn-primary" id="viewCertificateBtn">
                            <i class="fas fa-certificate"></i> 수료증 보기
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Success Toast -->
        <div class="toast-container position-fixed top-0 end-0 p-3">
            <div id="successToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header bg-success text-white">
                    <i class="fas fa-check-circle me-2"></i>
                    <strong class="me-auto">성공</strong>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body" id="successToastMessage">
                    작업이 완료되었습니다.
                </div>
            </div>
        </div>
        
        <!-- Page Specific JavaScript -->
        <script th:src="@{/js/program-completion.js}"></script>
    </div>
</body>
</html>
